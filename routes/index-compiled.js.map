{"version":3,"sources":["index.js"],"names":[],"mappings":";;AAAA,IAAI,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AACjC,IAAI,MAAM,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC;AAC9B,IAAI,YAAY,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;AAC1C,IAAI,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;;AAGjC,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAK/B,IAAI,gBAAgB,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;;AAIpD,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,MAAM,EAAE,CAAC;;AAGjC,IAAI,MAAM,CAAC;AACX,IAAI,MAAM,CAAC;AACX,IAAI,QAAQ,CAAC;AACb,IAAI,UAAU,GAAG,CAAC,gBAAgB,EAAE,oBAAoB,EAAE,sBAAsB,CAAC,CAAC;;AAElF,IAAI,IAAI,GAAG;AACP,OAAG,EAAE,QAAQ;AACb,MAAE,EAAG,MAAM;CACd,CAAC;;AAEF,IAAI,KAAK,GAAG,CACR;AACI,OAAG,EAAE,QAAQ;AACb,MAAE,EAAE,MAAM;CACb,CACA,CAAC;;;AAGL,SAAS,QAAQ,CAAC,SAAS,EAAE;AAC1B,QAAI,CAAC,GAAG,GAAG,EAAE,CAAC;;AAEd,UAAM,CAAC,WAAW,CAAC,SAAS,EAAE,UAAU,GAAG,EAAE,MAAM,EAAC;;AAEpD,aAAK,GAAG,IAAI,MAAM,EAAE;;AAElB,gBAAI,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC;;AAE3B,iBAAK,IAAI,IAAI,IAAI,EAAE;;AAEjB,oBAAI,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;AACxC,oBAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aAExB;SACF;KACF,CAAC,CAAC;;CAEH;;;AAGF,SAAS,OAAO,GAAG;;AAEf,QAAI,CAAC,EAAE,GAAG,EAAE,CAAC;AACb,QAAI,CAAC,GAAG,CAAC,OAAO,CAAC,UAAU,IAAI,EAAE;AAC7B,YAAI,SAAS,GAAG;AACZ,eAAG,EAAE,IAAI;AACT,gBAAI,EAAE,IAAI;SACb,CAAC;AACF,eAAO,CAAC,GAAG,CAAC,SAAS,EAAE,UAAU,GAAG,EAAE,QAAQ,EAAE;AAC5C,gBAAI,MAAM,GAAG,QAAQ,CAAC,WAAW,CAAC;;AAElC,gBAAI,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;;;SAGxB,CAAC,CAAC;KACN,CAAC,CAAC;CACN;;;AAID,SAAS,gBAAgB,CAAC,QAAQ,EAAE;;AAEhC,QAAI,SAAS,GAAG,IAAI,gBAAgB,CAAC,QAAQ,CAAC,CAAC;;AAE/C,aAAS,CAAC,EAAE,CAAC,MAAM,EAAE,UAAU,OAAO,EAAE;;AAEpC,eAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC;;;;;KAK9B,CAAC,CAAC;;AAEH,aAAS,CAAC,KAAK,EAAE,CAAC;CACrB;;;;;;;AAQD,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,UAAS,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE;;AAEvC,OAAG,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE,KAAK,EAAE,WAAW,EAAC,CAAC,CAAC;CAE5C,CAAC,CAAC;;AAGH,MAAM,CAAC,IAAI,CAAC,gBAAgB,EAAE,UAAS,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE;AACnD,QAAI,QAAQ,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC;;;AAG5B,oBAAgB,CAAC,QAAQ,CAAC,CAAC;;;;AAI3B,OAAG,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;CAEvB,CAAC,CAAC;;;AAIH,MAAM,CAAC,GAAG,CAAC,cAAc,EAAE,UAAU,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE;AAClD,OAAG,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;CAC5B,CAAC,CAAC;;;AAIH,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,UAAU,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE;;AAG9C,QAAI,OAAO,GAAG,EAAE,CAAC;;AAEjB,SAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;;;AAGtC,YAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACtB,YAAI,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACpB,eAAO,CAAC,IAAI,CAAC,EAAC,GAAG,EAAH,GAAG,EAAE,EAAE,EAAF,EAAE,EAAC,CAAC,CAAC;KAE3B;;AAED,OAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;;CAErB,CAAC,CAAC;;AAGH,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,UAAS,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE;AAC7C,OAAG,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;CACvB,CAAC,CAAC;;AAGH,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC","file":"index-compiled.js","sourcesContent":["var express = require('express');\nvar router = express.Router();\nvar responseTime = require('node-statsd');\nvar request = require('request');\n\n\nvar xml2js = require('xml2js');\n\n\n\n\nvar SitemapGenerator = require('sitemap-generator');\n\n\n\nvar parser = new xml2js.Parser();\n\n\nvar urlObj;\nvar urlArr;\nvar respTime;\nvar urlArrTest = ['http://fex.net', 'http://example.com', 'http://wikipedia.org'];\n\nvar data = {\n    url: respTime,\n    ms : urlArr\n};\n\nvar data2 = [\n    {\n        url: respTime,\n        ms: urlArr\n    }\n    ];\n\n//parse xml file to url array string\n function parseUrl(sMapParam) {\n    data.url = [];\n\n    parser.parseString(sMapParam, function (err, urlObj){\n    \n    for (key in urlObj) {\n\n      var prop = urlObj[key].url;\n\n      for (key2 in prop) {\n\n        var testArr = prop[key2].loc.toString();\n        data.url.push(testArr);\n\n      }\n    }\n  });\n    // return data.output2;\n }\n\n// to get response time each URL\nfunction getTime() {\n    // var respTime = [];\n    data.ms = [];\n    data.url.forEach(function (item) {\n        var resUrlObj = {\n            url: item,\n            time: true\n        };\n        request.get(resUrlObj, function (err, response) {\n            var tesTms = response.elapsedTime;\n\n            data.ms.push(tesTms);\n\n            // console.log('Request time in ms', respTime);\n        });\n    });\n}\n\n\n//to get sitemap.xml from user URL\nfunction generatorSitemap(url_time) {\n\n    var generator = new SitemapGenerator(url_time);\n\n    generator.on('done', function (sitemap) {\n        // parseUrl(sitemap);\n        getTime(parseUrl(sitemap));\n\n        // var jsonStr = JSON.stringify(str);\n        // console.log(sitemap); // => prints xml sitemap\n        // return sitemap;\n    });\n    // start the crawler\n    generator.start();\n}\n\n// function getCallBackFunc(options, callback) {\n//     callback(options);\n// }\n\n\n/* GET home page. */\nrouter.get('/', function(req, res, next) {\n\n  res.render('index', { title: 'Test Task'});\n\n});\n\n\nrouter.post('/response-time', function(req, res, next) {\n    var url_time = req.body.url;\n\n    // generator.start();\n    generatorSitemap(url_time);\n\n    // generatorSitemap(url_time);\n\n    res.render('index');\n\n});\n\n\n//test result route button\nrouter.get('/test-result', function (req, res, next) {\n   res.render('index', data);\n});\n\n\n//to JsonData\nrouter.get('/get-data', function (req, res, next) {\n\n\n    var objData = [];\n\n    for (var i = 0; i < data.url.length; i++) {\n\n        // obj[ labels[i] ] = data[i];\n        var url = data.url[i];\n        var ms = data.ms[i];\n        objData.push({url, ms});\n\n    }\n\n    res.json(objData);\n    // res.render('index', data);\n});\n\n\nrouter.get('/barchart', function(req, res, next) {\n    res.render('index');\n});\n\n\nmodule.exports = router;\n"]}